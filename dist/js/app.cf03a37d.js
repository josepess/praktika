(function(e){function t(t){for(var n,i,l=t[0],c=t[1],s=t[2],u=0,d=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,s||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,l=1;l<o.length;l++){var c=o[l];0!==a[c]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var p=c;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"4b63":function(e,t,o){"use strict";o("8b19")},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("7a23");const a={class:"container"};function r(e,t,o,r,i,l){const c=Object(n["n"])("Map");return Object(n["j"])(),Object(n["f"])("div",a,[(Object(n["j"])(),Object(n["d"])(n["b"],null,{default:Object(n["q"])(()=>[(Object(n["j"])(),Object(n["d"])(c,{key:i.key}))]),_:1}))])}const i=e=>(Object(n["l"])("data-v-642d07cd"),e=e(),Object(n["k"])(),e),l=i(()=>Object(n["g"])("div",{id:"mapContainer"},null,-1));function c(e,t,o,a,r,i){const c=Object(n["n"])("modal-window");return Object(n["j"])(),Object(n["f"])(n["a"],null,[l,Object(n["i"])(c,{latex1:r.lat1,lonex1:r.lon1,show:this.DialogVisible,"onUpdate:show":t[0]||(t[0]=e=>this.DialogVisible=e)},null,8,["latex1","lonex1","show"])],64)}var s=o("8af6"),p=o.n(s),u=(o("0357"),o("2591"));const d={apiKey:"AIzaSyCxyOk_h59oawPhRPlRL17lv-qwIc9Kslk",authDomain:"praktika-caballero.firebaseapp.com",projectId:"praktika-caballero",storageBucket:"praktika-caballero.appspot.com",messagingSenderId:"877051098312",appId:"1:877051098312:web:1edd864f6aeed1f30fe1fd",measurementId:"G-08L2768CM3"},b=u["a"].initializeApp(d);var m=[];const f=b.firestore(),g=f.collection("users"),h=e=>g.add(e);function j(e,t,o,a,r,i){const l=Object(n["n"])("MarkCreate");return o.show?(Object(n["j"])(),Object(n["f"])("div",{key:0,class:"modal-backdrop",onClick:t[1]||(t[1]=(...e)=>i.hideDialog&&i.hideDialog(...e))},[Object(n["g"])("div",{onClick:t[0]||(t[0]=Object(n["s"])(()=>{},["stop"])),class:"modal-content"},[Object(n["i"])(l,{latex:o.latex1,lonex:o.lonex1},null,8,["latex","lonex"])])])):Object(n["e"])("",!0)}const O={class:"card card-body mt-4"},v={class:"form-group"},y=Object(n["g"])("label",null,"Категория",-1),w={class:"form-group mt-3"},k=Object(n["g"])("label",null,"Описание",-1),x={class:"form-group mt-3"},M=Object(n["g"])("label",null,"Вид метки",-1),C=Object(n["h"])('<option value="img/festival.png">Мероприятие</option><option value="img/bench.svg">Скамейка</option><option value="img/sale.png">Акция</option><option value="img/sport.png">Спорт</option><option value="img/sign2.png">Чрезвычайное происшествие</option>',5),D=[C],S={class:"form-group mt-3"},P=Object(n["g"])("label",null,"Время жизни (ч)",-1);function V(e,t,o,a,r,i){return Object(n["j"])(),Object(n["f"])("div",O,[Object(n["g"])("form",{onSubmit:t[5]||(t[5]=Object(n["s"])((...e)=>a.onSubmit&&a.onSubmit(...e),["prevent"]))},[Object(n["g"])("div",v,[y,Object(n["r"])(Object(n["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.title=e),class:"form-control",required:""},null,512),[[n["p"],a.form.title]])]),Object(n["g"])("div",w,[k,Object(n["r"])(Object(n["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.description=e),class:"form-control",required:""},null,512),[[n["p"],a.form.description]])]),Object(n["g"])("div",x,[M,Object(n["r"])(Object(n["g"])("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.image=e),name:"icon",id:"icon"},D,512),[[n["o"],a.form.image]])]),Object(n["g"])("div",S,[P,Object(n["r"])(Object(n["g"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.lifetime=e),class:"form-control",required:"",type:"number"},null,512),[[n["p"],a.form.lifetime]])]),Object(n["g"])("button",{type:"submit",class:"btn btn-success mt-3",onClick:t[4]||(t[4]=(...e)=>i.printmes&&i.printmes(...e))}," Установить метку ")],32)])}var _={props:{latex:Number,lonex:Number},setup(e){const t=Object(n["m"])({title:"",description:"",image:"",lifetime:"",endlife:"",lat:e.latex,lon:e.lonex}),o=async()=>{await h({...t}),t.lat=e.latex,t.lon=e.lonex,t.title="",t.description="",t.image="",t.lifetime=""};return t.endlife=Date.now(),{form:t,onSubmit:o}},methods:{printmes(){console.log("Данные отправлены"),this.$root.forceRerender()}}},I=o("6b0d"),U=o.n(I);const A=U()(_,[["render",V]]);var L=A,q={name:"modal",props:{show:{type:Boolean,default:!1},latex1:Number,lonex1:Number},methods:{hideDialog(){this.$emit("update:show",!1)}},components:{MarkCreate:L}};o("4b63");const z=U()(q,[["render",j]]);var N=z,R={name:"Map",components:{ModalWindow:N},async setup(){const e=f.collection("users"),t=await e.get();return t.forEach(e=>{m.push(e.data())}),{newData:m,deleteUser:void 0}},data(){return{centerCoordinates:[60.007,30.373],map:null,tileLayer:null,DialogVisible:!1,reload:!1,lat1:1,lon1:1}},mounted(){this.initMap(),this.map.on("click",e=>{this.mapClick(e)})},methods:{ShowDialog(){this.DialogVisible=!0},initMap(){this.map=p.a.map("mapContainer").setView(this.centerCoordinates,13),this.tileLayer=p.a.tileLayer("https://tile.thunderforest.com/atlas/{z}/{x}/{y}.png?apikey=53e5ee6cc6264df082316cc3c831a566",{}),this.tileLayer.addTo(this.map),m.forEach(e=>{p.a.Marker.prototype.options.icon=p.a.icon({iconUrl:e.image,iconSize:[40,40],iconAnchor:[15,15],shadowAnchor:[10,10],popupAnchor:[7,-15]});var t=e.title+": "+e.description;e.endlife+36e5*e.lifetime>Date.now()&&new p.a.Marker([parseFloat(e.lat),parseFloat(e.lon)]).addTo(this.map).bindPopup(t)})},mapClick(e){this.DialogVisible=!0,this.lat1=e.latlng["lat"],this.lon1=e.latlng["lng"]}}};o("8fd2");const T=U()(R,[["render",c],["__scopeId","data-v-642d07cd"]]);var B=T,E={name:"App",components:{Map:B},data(){return{key:0}},methods:{forceRerender(){this.key+=1}}};const F=U()(E,[["render",r]]);var J=F;Object(n["c"])(J).mount("#app")},"8b19":function(e,t,o){},"8fd2":function(e,t,o){"use strict";o("e4de")},e4de:function(e,t,o){}});
//# sourceMappingURL=app.cf03a37d.js.map